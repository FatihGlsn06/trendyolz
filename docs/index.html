<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>n8n Academy - Interactive Learning Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        n8n: {
                            primary: '#ff6d5a',
                            secondary: '#1a1a2e',
                            dark: '#0f0f1a',
                            accent: '#00d4aa',
                            purple: '#8b5cf6',
                            blue: '#3b82f6',
                            orange: '#f97316'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        * { font-family: 'Inter', sans-serif; }

        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1a1a2e; }
        ::-webkit-scrollbar-thumb { background: #ff6d5a; border-radius: 4px; }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 109, 90, 0.3); }
            50% { box-shadow: 0 0 40px rgba(255, 109, 90, 0.6); }
        }
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100px) rotate(720deg); opacity: 0; }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .float-animation { animation: float 3s ease-in-out infinite; }
        .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        .shake { animation: shake 0.5s ease-in-out; }
        .slide-in { animation: slideIn 0.5s ease-out forwards; }

        /* Node styles */
        .node {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .node:hover {
            transform: scale(1.05);
            filter: brightness(1.2);
        }
        .node.completed {
            border-color: #00d4aa !important;
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.2), rgba(0, 212, 170, 0.1));
        }
        .node.active {
            border-color: #ff6d5a !important;
            animation: pulse-glow 2s ease-in-out infinite;
        }
        .node.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Connection lines */
        .connection-line {
            stroke-dasharray: 5;
            animation: dash 20s linear infinite;
        }
        @keyframes dash {
            to { stroke-dashoffset: -100; }
        }

        /* Progress ring */
        .progress-ring {
            transform: rotate(-90deg);
        }

        /* Code editor styles */
        .code-block {
            background: #1e1e2e;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
        }
        .tooltip::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #1a1a2e;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
        }
        .tooltip:hover::after {
            opacity: 1;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Hide sections */
        .section { display: none; }
        .section.active { display: block; }

        /* Lesson card hover */
        .lesson-card {
            transition: all 0.3s ease;
        }
        .lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        /* XP bar animation */
        .xp-fill {
            transition: width 1s ease-out;
        }

        /* Streak fire */
        .streak-fire {
            text-shadow: 0 0 10px #ff6d5a, 0 0 20px #ff6d5a;
        }
    </style>
</head>
<body class="bg-n8n-dark text-white min-h-screen">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 glass">
        <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-gradient-to-br from-n8n-primary to-n8n-orange rounded-xl flex items-center justify-center">
                    <i class="fas fa-project-diagram text-white"></i>
                </div>
                <span class="text-xl font-bold">n8n <span class="text-n8n-primary">Academy</span></span>
            </div>

            <!-- Navigation -->
            <nav class="hidden md:flex items-center gap-6">
                <button onclick="showSection('dashboard')" class="nav-btn text-gray-400 hover:text-white transition" data-section="dashboard">
                    <i class="fas fa-home mr-2"></i>Ana Sayfa
                </button>
                <button onclick="showSection('roadmap')" class="nav-btn text-gray-400 hover:text-white transition" data-section="roadmap">
                    <i class="fas fa-map mr-2"></i>Yol HaritasÄ±
                </button>
                <button onclick="showSection('lessons')" class="nav-btn text-gray-400 hover:text-white transition" data-section="lessons">
                    <i class="fas fa-book mr-2"></i>Dersler
                </button>
                <button onclick="showSection('sandbox')" class="nav-btn text-gray-400 hover:text-white transition" data-section="sandbox">
                    <i class="fas fa-flask mr-2"></i>Sandbox
                </button>
                <button onclick="showSection('achievements')" class="nav-btn text-gray-400 hover:text-white transition" data-section="achievements">
                    <i class="fas fa-trophy mr-2"></i>Rozetler
                </button>
            </nav>

            <!-- User Stats -->
            <div class="flex items-center gap-4">
                <!-- Streak -->
                <div class="flex items-center gap-2 bg-n8n-secondary px-3 py-1.5 rounded-full">
                    <span class="streak-fire">ğŸ”¥</span>
                    <span id="streakCount" class="font-bold">0</span>
                </div>

                <!-- XP -->
                <div class="flex items-center gap-2 bg-n8n-secondary px-3 py-1.5 rounded-full">
                    <i class="fas fa-star text-yellow-400"></i>
                    <span id="xpCount" class="font-bold">0</span>
                    <span class="text-gray-400 text-sm">XP</span>
                </div>

                <!-- Level -->
                <div class="relative">
                    <svg class="progress-ring w-12 h-12">
                        <circle cx="24" cy="24" r="20" fill="none" stroke="#1a1a2e" stroke-width="4"/>
                        <circle id="levelProgress" cx="24" cy="24" r="20" fill="none" stroke="#ff6d5a" stroke-width="4"
                                stroke-dasharray="125.6" stroke-dashoffset="125.6" stroke-linecap="round"/>
                    </svg>
                    <span id="levelNumber" class="absolute inset-0 flex items-center justify-center text-sm font-bold">1</span>
                </div>

                <!-- Focus Mode Toggle -->
                <button onclick="toggleFocusMode()" class="p-2 rounded-lg bg-n8n-secondary hover:bg-n8n-primary/20 transition tooltip" data-tip="Odak Modu">
                    <i class="fas fa-brain text-n8n-purple"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Focus Mode Timer (Hidden by default) -->
    <div id="focusTimer" class="fixed top-20 right-4 z-50 glass rounded-2xl p-4 hidden">
        <div class="text-center">
            <div class="text-3xl font-bold mb-2" id="timerDisplay">25:00</div>
            <div class="text-sm text-gray-400 mb-3">Pomodoro Timer</div>
            <div class="flex gap-2">
                <button onclick="startTimer()" class="px-3 py-1 bg-n8n-accent rounded-lg text-sm hover:bg-n8n-accent/80">
                    <i class="fas fa-play"></i>
                </button>
                <button onclick="pauseTimer()" class="px-3 py-1 bg-n8n-secondary rounded-lg text-sm hover:bg-n8n-secondary/80">
                    <i class="fas fa-pause"></i>
                </button>
                <button onclick="resetTimer()" class="px-3 py-1 bg-n8n-primary/20 rounded-lg text-sm hover:bg-n8n-primary/30">
                    <i class="fas fa-redo"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="pt-20 pb-8">

        <!-- DASHBOARD SECTION -->
        <section id="dashboard" class="section active px-4 max-w-7xl mx-auto">
            <!-- Welcome Banner -->
            <div class="mt-6 bg-gradient-to-r from-n8n-primary/20 to-n8n-purple/20 rounded-3xl p-8 border border-n8n-primary/30">
                <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                    <div>
                        <h1 class="text-3xl md:text-4xl font-bold mb-3">
                            Merhaba, <span class="text-n8n-primary" id="userName">Ã–ÄŸrenci</span>! ğŸ‘‹
                        </h1>
                        <p class="text-gray-400 text-lg mb-4">n8n otomasyon dÃ¼nyasÄ±na hoÅŸ geldin. BugÃ¼n ne Ã¶ÄŸrenmek istersin?</p>
                        <div class="flex flex-wrap gap-3">
                            <button onclick="continueLesson()" class="px-6 py-3 bg-n8n-primary rounded-xl font-semibold hover:bg-n8n-primary/80 transition flex items-center gap-2">
                                <i class="fas fa-play"></i> KaldÄ±ÄŸÄ±m Yerden Devam Et
                            </button>
                            <button onclick="showSection('roadmap')" class="px-6 py-3 bg-n8n-secondary rounded-xl font-semibold hover:bg-n8n-secondary/80 transition flex items-center gap-2">
                                <i class="fas fa-map"></i> Yol HaritasÄ±nÄ± GÃ¶r
                            </button>
                        </div>
                    </div>
                    <div class="float-animation">
                        <div class="w-48 h-48 bg-gradient-to-br from-n8n-primary to-n8n-orange rounded-3xl flex items-center justify-center">
                            <i class="fas fa-robot text-6xl text-white"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-8">
                <div class="glass rounded-2xl p-5 text-center">
                    <div class="text-4xl font-bold text-n8n-primary" id="completedLessons">0</div>
                    <div class="text-gray-400 mt-1">Tamamlanan Ders</div>
                </div>
                <div class="glass rounded-2xl p-5 text-center">
                    <div class="text-4xl font-bold text-n8n-accent" id="totalTime">0</div>
                    <div class="text-gray-400 mt-1">Dakika Ã–ÄŸrenim</div>
                </div>
                <div class="glass rounded-2xl p-5 text-center">
                    <div class="text-4xl font-bold text-n8n-purple" id="badgesEarned">0</div>
                    <div class="text-gray-400 mt-1">KazanÄ±lan Rozet</div>
                </div>
                <div class="glass rounded-2xl p-5 text-center">
                    <div class="text-4xl font-bold text-n8n-orange" id="currentStreak">0</div>
                    <div class="text-gray-400 mt-1">GÃ¼nlÃ¼k Seri</div>
                </div>
            </div>

            <!-- Daily Challenge -->
            <div class="mt-8 glass rounded-2xl p-6 border-l-4 border-n8n-accent">
                <div class="flex items-start justify-between">
                    <div>
                        <div class="flex items-center gap-2 mb-2">
                            <i class="fas fa-bolt text-n8n-accent"></i>
                            <span class="font-semibold text-n8n-accent">GÃ¼nÃ¼n GÃ¶revi</span>
                            <span class="px-2 py-0.5 bg-n8n-accent/20 rounded-full text-xs">+50 XP</span>
                        </div>
                        <h3 class="text-xl font-bold mb-2" id="dailyChallengeTitle">Ä°lk Workflow'unu OluÅŸtur</h3>
                        <p class="text-gray-400" id="dailyChallengeDesc">Basit bir HTTP trigger ile baÅŸlayan workflow oluÅŸtur ve test et.</p>
                    </div>
                    <button onclick="startDailyChallenge()" class="px-4 py-2 bg-n8n-accent rounded-xl font-semibold hover:bg-n8n-accent/80 transition">
                        BaÅŸla
                    </button>
                </div>
            </div>

            <!-- Quick Access Cards -->
            <h2 class="text-2xl font-bold mt-10 mb-4">HÄ±zlÄ± EriÅŸim</h2>
            <div class="grid md:grid-cols-3 gap-4">
                <div onclick="showSection('lessons')" class="lesson-card glass rounded-2xl p-6 cursor-pointer border border-transparent hover:border-n8n-primary/50">
                    <div class="w-12 h-12 bg-n8n-primary/20 rounded-xl flex items-center justify-center mb-4">
                        <i class="fas fa-graduation-cap text-n8n-primary text-xl"></i>
                    </div>
                    <h3 class="text-lg font-bold mb-2">Temel Kavramlar</h3>
                    <p class="text-gray-400 text-sm mb-3">n8n'in yapÄ± taÅŸlarÄ±nÄ± Ã¶ÄŸren: Node'lar, baÄŸlantÄ±lar ve veri akÄ±ÅŸÄ±.</p>
                    <div class="flex items-center gap-2 text-sm text-n8n-primary">
                        <span>8 ders</span>
                        <span class="text-gray-600">â€¢</span>
                        <span>~25 dk</span>
                    </div>
                </div>

                <div onclick="showSection('sandbox')" class="lesson-card glass rounded-2xl p-6 cursor-pointer border border-transparent hover:border-n8n-purple/50">
                    <div class="w-12 h-12 bg-n8n-purple/20 rounded-xl flex items-center justify-center mb-4">
                        <i class="fas fa-flask text-n8n-purple text-xl"></i>
                    </div>
                    <h3 class="text-lg font-bold mb-2">Pratik Yap</h3>
                    <p class="text-gray-400 text-sm mb-3">Ä°nteraktif sandbox'ta workflow'larÄ±nÄ± oluÅŸtur ve test et.</p>
                    <div class="flex items-center gap-2 text-sm text-n8n-purple">
                        <span>SÄ±nÄ±rsÄ±z deneme</span>
                    </div>
                </div>

                <div onclick="showSection('achievements')" class="lesson-card glass rounded-2xl p-6 cursor-pointer border border-transparent hover:border-n8n-accent/50">
                    <div class="w-12 h-12 bg-n8n-accent/20 rounded-xl flex items-center justify-center mb-4">
                        <i class="fas fa-trophy text-n8n-accent text-xl"></i>
                    </div>
                    <h3 class="text-lg font-bold mb-2">BaÅŸarÄ±larÄ±m</h3>
                    <p class="text-gray-400 text-sm mb-3">KazandÄ±ÄŸÄ±n rozetleri gÃ¶r ve yeni hedefler belirle.</p>
                    <div class="flex items-center gap-2 text-sm text-n8n-accent">
                        <span id="unlockedBadges">0</span>/<span>24</span> rozet
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <h2 class="text-2xl font-bold mt-10 mb-4">Son Aktiviteler</h2>
            <div class="glass rounded-2xl p-4" id="recentActivity">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-history text-4xl mb-3 opacity-50"></i>
                    <p>HenÃ¼z aktivite yok. Ä°lk dersine baÅŸla!</p>
                </div>
            </div>
        </section>

        <!-- ROADMAP SECTION -->
        <section id="roadmap" class="section px-4 max-w-7xl mx-auto">
            <div class="mt-6 mb-8">
                <h1 class="text-3xl font-bold mb-2">Ã–ÄŸrenme Yol HaritasÄ±</h1>
                <p class="text-gray-400">AdÄ±m adÄ±m n8n uzmanÄ± ol. Her dÃ¼ÄŸÃ¼mÃ¼ tÄ±klayarak derslere eriÅŸ.</p>
            </div>

            <!-- Roadmap SVG -->
            <div class="relative overflow-x-auto pb-8">
                <svg viewBox="0 0 1200 800" class="w-full min-w-[900px]" id="roadmapSVG">
                    <!-- Background Grid -->
                    <defs>
                        <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                            <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/>
                        </pattern>
                        <linearGradient id="lineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#ff6d5a;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <rect width="100%" height="100%" fill="url(#grid)"/>

                    <!-- Connection Lines -->
                    <g class="connections">
                        <!-- Start to Basics -->
                        <path d="M 120 100 Q 200 100 250 180" stroke="url(#lineGradient)" stroke-width="3" fill="none" class="connection-line"/>
                        <!-- Basics to Triggers -->
                        <path d="M 310 240 Q 380 280 450 280" stroke="url(#lineGradient)" stroke-width="3" fill="none" class="connection-line"/>
                        <!-- Triggers to Actions -->
                        <path d="M 570 280 Q 640 280 700 220" stroke="url(#lineGradient)" stroke-width="3" fill="none" class="connection-line"/>
                        <!-- Actions to Data -->
                        <path d="M 760 160 Q 800 100 860 100" stroke="url(#lineGradient)" stroke-width="3" fill="none" class="connection-line"/>
                        <!-- Data to Advanced -->
                        <path d="M 920 160 Q 960 240 960 320" stroke="url(#lineGradient)" stroke-width="3" fill="none" class="connection-line"/>
                        <!-- Advanced to Integrations -->
                        <path d="M 900 380 Q 800 420 700 420" stroke="url(#lineGradient)" stroke-width="3" fill="none" class="connection-line"/>
                        <!-- Integrations to Projects -->
                        <path d="M 580 420 Q 480 460 400 520" stroke="url(#lineGradient)" stroke-width="3" fill="none" class="connection-line"/>
                        <!-- Projects to Master -->
                        <path d="M 340 580 Q 280 640 200 680" stroke="url(#lineGradient)" stroke-width="3" fill="none" class="connection-line"/>
                    </g>

                    <!-- Nodes -->
                    <!-- START -->
                    <g class="node active" onclick="openModule('start')" transform="translate(60, 60)">
                        <circle cx="40" cy="40" r="38" fill="#1a1a2e" stroke="#ff6d5a" stroke-width="3"/>
                        <text x="40" y="35" text-anchor="middle" fill="#ff6d5a" font-size="24">ğŸš€</text>
                        <text x="40" y="55" text-anchor="middle" fill="white" font-size="10" font-weight="bold">BAÅLA</text>
                    </g>

                    <!-- BASICS -->
                    <g class="node" onclick="openModule('basics')" transform="translate(210, 160)">
                        <rect x="0" y="0" width="120" height="80" rx="12" fill="#1a1a2e" stroke="#3b82f6" stroke-width="2"/>
                        <text x="60" y="35" text-anchor="middle" fill="#3b82f6" font-size="20">ğŸ“¦</text>
                        <text x="60" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Temel Kavramlar</text>
                        <text x="60" y="70" text-anchor="middle" fill="#6b7280" font-size="9">8 ders â€¢ 25 dk</text>
                    </g>

                    <!-- TRIGGERS -->
                    <g class="node locked" onclick="openModule('triggers')" transform="translate(450, 240)">
                        <rect x="0" y="0" width="120" height="80" rx="12" fill="#1a1a2e" stroke="#8b5cf6" stroke-width="2"/>
                        <text x="60" y="35" text-anchor="middle" fill="#8b5cf6" font-size="20">âš¡</text>
                        <text x="60" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Trigger'lar</text>
                        <text x="60" y="70" text-anchor="middle" fill="#6b7280" font-size="9">6 ders â€¢ 20 dk</text>
                        <circle cx="110" cy="10" r="10" fill="#1a1a2e" stroke="#6b7280" stroke-width="2"/>
                        <text x="110" y="14" text-anchor="middle" fill="#6b7280" font-size="10">ğŸ”’</text>
                    </g>

                    <!-- ACTIONS -->
                    <g class="node locked" onclick="openModule('actions')" transform="translate(680, 140)">
                        <rect x="0" y="0" width="120" height="80" rx="12" fill="#1a1a2e" stroke="#f97316" stroke-width="2"/>
                        <text x="60" y="35" text-anchor="middle" fill="#f97316" font-size="20">ğŸ¯</text>
                        <text x="60" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Action Node'lar</text>
                        <text x="60" y="70" text-anchor="middle" fill="#6b7280" font-size="9">10 ders â€¢ 35 dk</text>
                        <circle cx="110" cy="10" r="10" fill="#1a1a2e" stroke="#6b7280" stroke-width="2"/>
                        <text x="110" y="14" text-anchor="middle" fill="#6b7280" font-size="10">ğŸ”’</text>
                    </g>

                    <!-- DATA TRANSFORMATION -->
                    <g class="node locked" onclick="openModule('data')" transform="translate(860, 60)">
                        <rect x="0" y="0" width="120" height="80" rx="12" fill="#1a1a2e" stroke="#00d4aa" stroke-width="2"/>
                        <text x="60" y="35" text-anchor="middle" fill="#00d4aa" font-size="20">ğŸ”„</text>
                        <text x="60" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Veri DÃ¶nÃ¼ÅŸÃ¼mÃ¼</text>
                        <text x="60" y="70" text-anchor="middle" fill="#6b7280" font-size="9">8 ders â€¢ 30 dk</text>
                        <circle cx="110" cy="10" r="10" fill="#1a1a2e" stroke="#6b7280" stroke-width="2"/>
                        <text x="110" y="14" text-anchor="middle" fill="#6b7280" font-size="10">ğŸ”’</text>
                    </g>

                    <!-- ADVANCED -->
                    <g class="node locked" onclick="openModule('advanced')" transform="translate(900, 320)">
                        <rect x="0" y="0" width="120" height="80" rx="12" fill="#1a1a2e" stroke="#ec4899" stroke-width="2"/>
                        <text x="60" y="35" text-anchor="middle" fill="#ec4899" font-size="20">ğŸ§ </text>
                        <text x="60" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Ä°leri Seviye</text>
                        <text x="60" y="70" text-anchor="middle" fill="#6b7280" font-size="9">12 ders â€¢ 45 dk</text>
                        <circle cx="110" cy="10" r="10" fill="#1a1a2e" stroke="#6b7280" stroke-width="2"/>
                        <text x="110" y="14" text-anchor="middle" fill="#6b7280" font-size="10">ğŸ”’</text>
                    </g>

                    <!-- INTEGRATIONS -->
                    <g class="node locked" onclick="openModule('integrations')" transform="translate(580, 380)">
                        <rect x="0" y="0" width="120" height="80" rx="12" fill="#1a1a2e" stroke="#06b6d4" stroke-width="2"/>
                        <text x="60" y="35" text-anchor="middle" fill="#06b6d4" font-size="20">ğŸ”—</text>
                        <text x="60" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Entegrasyonlar</text>
                        <text x="60" y="70" text-anchor="middle" fill="#6b7280" font-size="9">15 ders â€¢ 50 dk</text>
                        <circle cx="110" cy="10" r="10" fill="#1a1a2e" stroke="#6b7280" stroke-width="2"/>
                        <text x="110" y="14" text-anchor="middle" fill="#6b7280" font-size="10">ğŸ”’</text>
                    </g>

                    <!-- PROJECTS -->
                    <g class="node locked" onclick="openModule('projects')" transform="translate(300, 500)">
                        <rect x="0" y="0" width="120" height="80" rx="12" fill="#1a1a2e" stroke="#eab308" stroke-width="2"/>
                        <text x="60" y="35" text-anchor="middle" fill="#eab308" font-size="20">ğŸ—ï¸</text>
                        <text x="60" y="55" text-anchor="middle" fill="white" font-size="11" font-weight="bold">GerÃ§ek Projeler</text>
                        <text x="60" y="70" text-anchor="middle" fill="#6b7280" font-size="9">5 proje â€¢ 2 saat</text>
                        <circle cx="110" cy="10" r="10" fill="#1a1a2e" stroke="#6b7280" stroke-width="2"/>
                        <text x="110" y="14" text-anchor="middle" fill="#6b7280" font-size="10">ğŸ”’</text>
                    </g>

                    <!-- MASTER -->
                    <g class="node locked" onclick="openModule('master')" transform="translate(100, 640)">
                        <rect x="0" y="0" width="140" height="90" rx="16" fill="linear-gradient(135deg, #1a1a2e, #2a2a4e)" stroke="url(#lineGradient)" stroke-width="3"/>
                        <text x="70" y="40" text-anchor="middle" fill="#ffd700" font-size="28">ğŸ‘‘</text>
                        <text x="70" y="65" text-anchor="middle" fill="white" font-size="13" font-weight="bold">n8n MASTER</text>
                        <text x="70" y="80" text-anchor="middle" fill="#6b7280" font-size="9">Sertifika Kazan!</text>
                        <circle cx="130" cy="10" r="10" fill="#1a1a2e" stroke="#6b7280" stroke-width="2"/>
                        <text x="130" y="14" text-anchor="middle" fill="#6b7280" font-size="10">ğŸ”’</text>
                    </g>

                    <!-- Progress indicator -->
                    <g transform="translate(50, 750)">
                        <rect x="0" y="0" width="200" height="30" rx="15" fill="#1a1a2e"/>
                        <rect x="2" y="2" width="40" height="26" rx="13" fill="#ff6d5a" id="roadmapProgress"/>
                        <text x="100" y="20" text-anchor="middle" fill="white" font-size="11" font-weight="bold">
                            <tspan id="roadmapProgressText">%5 TamamlandÄ±</tspan>
                        </text>
                    </g>
                </svg>
            </div>
        </section>

        <!-- LESSONS SECTION -->
        <section id="lessons" class="section px-4 max-w-7xl mx-auto">
            <div class="mt-6 mb-8">
                <h1 class="text-3xl font-bold mb-2">Dersler</h1>
                <p class="text-gray-400">KÄ±sa, odaklÄ± derslerle n8n'i Ã¶ÄŸren. Her ders maksimum 5 dakika.</p>
            </div>

            <!-- Module Filter -->
            <div class="flex flex-wrap gap-2 mb-6">
                <button onclick="filterLessons('all')" class="filter-btn px-4 py-2 bg-n8n-primary rounded-full text-sm font-medium" data-filter="all">
                    TÃ¼mÃ¼
                </button>
                <button onclick="filterLessons('basics')" class="filter-btn px-4 py-2 bg-n8n-secondary rounded-full text-sm font-medium" data-filter="basics">
                    ğŸ“¦ Temel
                </button>
                <button onclick="filterLessons('triggers')" class="filter-btn px-4 py-2 bg-n8n-secondary rounded-full text-sm font-medium" data-filter="triggers">
                    âš¡ Trigger
                </button>
                <button onclick="filterLessons('actions')" class="filter-btn px-4 py-2 bg-n8n-secondary rounded-full text-sm font-medium" data-filter="actions">
                    ğŸ¯ Action
                </button>
                <button onclick="filterLessons('data')" class="filter-btn px-4 py-2 bg-n8n-secondary rounded-full text-sm font-medium" data-filter="data">
                    ğŸ”„ Veri
                </button>
            </div>

            <!-- Lessons Grid -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4" id="lessonsGrid">
                <!-- Lessons will be dynamically generated -->
            </div>
        </section>

        <!-- SANDBOX SECTION -->
        <section id="sandbox" class="section px-4 max-w-7xl mx-auto">
            <div class="mt-6 mb-8">
                <h1 class="text-3xl font-bold mb-2">n8n Sandbox</h1>
                <p class="text-gray-400">Ä°nteraktif ortamda workflow'larÄ±nÄ± oluÅŸtur ve test et.</p>
            </div>

            <!-- Sandbox Canvas -->
            <div class="glass rounded-2xl overflow-hidden">
                <!-- Toolbar -->
                <div class="flex items-center justify-between p-4 border-b border-white/10">
                    <div class="flex items-center gap-4">
                        <span class="font-semibold">Workflow Editor</span>
                        <div class="flex gap-2">
                            <button onclick="addNode('trigger')" class="px-3 py-1.5 bg-n8n-purple/20 text-n8n-purple rounded-lg text-sm hover:bg-n8n-purple/30 transition">
                                <i class="fas fa-bolt mr-1"></i> Trigger Ekle
                            </button>
                            <button onclick="addNode('action')" class="px-3 py-1.5 bg-n8n-orange/20 text-n8n-orange rounded-lg text-sm hover:bg-n8n-orange/30 transition">
                                <i class="fas fa-cog mr-1"></i> Action Ekle
                            </button>
                            <button onclick="addNode('condition')" class="px-3 py-1.5 bg-n8n-accent/20 text-n8n-accent rounded-lg text-sm hover:bg-n8n-accent/30 transition">
                                <i class="fas fa-code-branch mr-1"></i> KoÅŸul Ekle
                            </button>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="runWorkflow()" class="px-4 py-2 bg-n8n-accent rounded-lg font-semibold hover:bg-n8n-accent/80 transition">
                            <i class="fas fa-play mr-2"></i> Ã‡alÄ±ÅŸtÄ±r
                        </button>
                        <button onclick="clearWorkflow()" class="px-4 py-2 bg-n8n-secondary rounded-lg hover:bg-n8n-secondary/80 transition">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>

                <!-- Canvas Area -->
                <div class="relative h-[500px] bg-n8n-dark overflow-hidden" id="sandboxCanvas">
                    <!-- Grid background -->
                    <div class="absolute inset-0 opacity-20" style="background-image: radial-gradient(circle, #333 1px, transparent 1px); background-size: 20px 20px;"></div>

                    <!-- Nodes will be added here -->
                    <div id="nodesContainer" class="relative w-full h-full">
                        <!-- Sample Start Node -->
                        <div class="absolute sandbox-node" style="left: 50px; top: 200px;" data-node-id="start">
                            <div class="w-32 h-20 bg-gradient-to-br from-n8n-primary to-n8n-orange rounded-xl flex flex-col items-center justify-center cursor-move shadow-lg shadow-n8n-primary/30">
                                <i class="fas fa-play text-white text-xl mb-1"></i>
                                <span class="text-white text-xs font-medium">Start</span>
                            </div>
                            <div class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/2 w-3 h-3 bg-white rounded-full border-2 border-n8n-primary cursor-pointer node-output"></div>
                        </div>
                    </div>

                    <!-- Empty state message -->
                    <div id="sandboxEmpty" class="absolute inset-0 flex items-center justify-center pointer-events-none hidden">
                        <div class="text-center text-gray-500">
                            <i class="fas fa-project-diagram text-6xl mb-4 opacity-30"></i>
                            <p>Node eklemek iÃ§in yukarÄ±daki butonlarÄ± kullan</p>
                        </div>
                    </div>
                </div>

                <!-- Output Panel -->
                <div class="border-t border-white/10 p-4">
                    <div class="flex items-center justify-between mb-3">
                        <span class="font-semibold">Ã‡Ä±ktÄ±</span>
                        <span class="text-xs text-gray-400" id="executionStatus">Bekleniyor...</span>
                    </div>
                    <div class="code-block p-4 h-32 overflow-auto" id="outputPanel">
                        <pre class="text-gray-400 text-sm">// Workflow Ã§Ä±ktÄ±sÄ± burada gÃ¶rÃ¼necek</pre>
                    </div>
                </div>
            </div>

            <!-- Quick Challenges -->
            <h2 class="text-2xl font-bold mt-10 mb-4">HÄ±zlÄ± GÃ¶revler</h2>
            <div class="grid md:grid-cols-3 gap-4">
                <div class="glass rounded-xl p-4 cursor-pointer hover:border-n8n-primary/50 border border-transparent transition" onclick="loadChallenge('hello')">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="text-2xl">ğŸ‘‹</span>
                        <span class="font-semibold">Merhaba DÃ¼nya</span>
                    </div>
                    <p class="text-gray-400 text-sm">Ä°lk workflow'unu oluÅŸtur</p>
                    <div class="mt-2 text-xs text-n8n-accent">+20 XP</div>
                </div>
                <div class="glass rounded-xl p-4 cursor-pointer hover:border-n8n-purple/50 border border-transparent transition" onclick="loadChallenge('webhook')">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="text-2xl">ğŸ”—</span>
                        <span class="font-semibold">Webhook Dinle</span>
                    </div>
                    <p class="text-gray-400 text-sm">HTTP isteklerini yakala</p>
                    <div class="mt-2 text-xs text-n8n-purple">+35 XP</div>
                </div>
                <div class="glass rounded-xl p-4 cursor-pointer hover:border-n8n-orange/50 border border-transparent transition" onclick="loadChallenge('transform')">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="text-2xl">ğŸ”„</span>
                        <span class="font-semibold">Veri DÃ¶nÃ¼ÅŸtÃ¼r</span>
                    </div>
                    <p class="text-gray-400 text-sm">JSON verisini manipÃ¼le et</p>
                    <div class="mt-2 text-xs text-n8n-orange">+50 XP</div>
                </div>
            </div>
        </section>

        <!-- ACHIEVEMENTS SECTION -->
        <section id="achievements" class="section px-4 max-w-7xl mx-auto">
            <div class="mt-6 mb-8">
                <h1 class="text-3xl font-bold mb-2">BaÅŸarÄ±lar ve Rozetler</h1>
                <p class="text-gray-400">Ã–ÄŸrenme yolculuÄŸundaki baÅŸarÄ±larÄ±nÄ± takip et.</p>
            </div>

            <!-- Achievement Stats -->
            <div class="glass rounded-2xl p-6 mb-8">
                <div class="grid md:grid-cols-4 gap-6 text-center">
                    <div>
                        <div class="text-5xl font-bold text-n8n-primary" id="totalXP">0</div>
                        <div class="text-gray-400 mt-1">Toplam XP</div>
                    </div>
                    <div>
                        <div class="text-5xl font-bold text-n8n-accent" id="achievementLevel">1</div>
                        <div class="text-gray-400 mt-1">Seviye</div>
                    </div>
                    <div>
                        <div class="text-5xl font-bold text-n8n-purple" id="totalBadges">0</div>
                        <div class="text-gray-400 mt-1">Rozet</div>
                    </div>
                    <div>
                        <div class="text-5xl font-bold text-n8n-orange" id="achievementStreak">0</div>
                        <div class="text-gray-400 mt-1">En Uzun Seri</div>
                    </div>
                </div>
            </div>

            <!-- Badges Grid -->
            <h2 class="text-xl font-bold mb-4">Rozetler</h2>
            <div class="grid grid-cols-3 md:grid-cols-6 gap-4" id="badgesGrid">
                <!-- Badges will be generated dynamically -->
            </div>

            <!-- Milestones -->
            <h2 class="text-xl font-bold mt-10 mb-4">Kilometre TaÅŸlarÄ±</h2>
            <div class="space-y-4" id="milestonesList">
                <!-- Milestones will be generated dynamically -->
            </div>
        </section>

        <!-- LESSON VIEWER MODAL -->
        <div id="lessonModal" class="fixed inset-0 z-50 hidden">
            <div class="absolute inset-0 bg-black/80" onclick="closeLessonModal()"></div>
            <div class="absolute inset-4 md:inset-10 glass rounded-2xl overflow-hidden flex flex-col">
                <!-- Modal Header -->
                <div class="flex items-center justify-between p-4 border-b border-white/10">
                    <div class="flex items-center gap-3">
                        <button onclick="closeLessonModal()" class="p-2 hover:bg-white/10 rounded-lg transition">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div>
                            <div id="lessonModalTitle" class="font-bold">Ders BaÅŸlÄ±ÄŸÄ±</div>
                            <div class="text-sm text-gray-400"><span id="lessonModalModule">ModÃ¼l</span> â€¢ <span id="lessonModalDuration">3 dk</span></div>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="text-sm text-gray-400">
                            <span id="lessonProgress">1</span>/<span id="lessonTotal">5</span>
                        </div>
                        <button onclick="closeLessonModal()" class="p-2 hover:bg-white/10 rounded-lg transition">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="flex-1 overflow-auto p-6" id="lessonModalContent">
                    <!-- Lesson content will be injected here -->
                </div>

                <!-- Modal Footer -->
                <div class="p-4 border-t border-white/10 flex items-center justify-between">
                    <button onclick="prevLessonStep()" id="prevStepBtn" class="px-4 py-2 bg-n8n-secondary rounded-lg hover:bg-n8n-secondary/80 transition disabled:opacity-50" disabled>
                        <i class="fas fa-chevron-left mr-2"></i> Ã–nceki
                    </button>
                    <div class="flex gap-1" id="lessonDots">
                        <!-- Progress dots -->
                    </div>
                    <button onclick="nextLessonStep()" id="nextStepBtn" class="px-4 py-2 bg-n8n-primary rounded-lg hover:bg-n8n-primary/80 transition">
                        Sonraki <i class="fas fa-chevron-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>

    </main>

    <!-- Toast Container -->
    <div id="toastContainer" class="fixed bottom-4 right-4 z-50 space-y-2"></div>

    <!-- Confetti Canvas -->
    <canvas id="confettiCanvas" class="fixed inset-0 pointer-events-none z-50"></canvas>

    <script>
        // ==========================================
        // STATE MANAGEMENT
        // ==========================================
        let state = {
            user: {
                name: 'Ã–ÄŸrenci',
                xp: 0,
                level: 1,
                streak: 0,
                lastActivity: null
            },
            progress: {
                completedLessons: [],
                currentModule: 'start',
                currentLesson: null,
                currentStep: 0,
                totalTime: 0
            },
            achievements: {
                badges: [],
                milestones: []
            },
            settings: {
                focusMode: false,
                soundEnabled: true
            }
        };

        // ==========================================
        // LESSONS DATA
        // ==========================================
        const lessonsData = {
            basics: [
                {
                    id: 'basics-1',
                    title: 'n8n Nedir?',
                    duration: 3,
                    xp: 20,
                    icon: 'ğŸ¤–',
                    steps: [
                        {
                            type: 'info',
                            title: 'n8n ile TanÄ±ÅŸ!',
                            content: `
                                <div class="text-center mb-8">
                                    <div class="text-6xl mb-4">ğŸ¤–</div>
                                    <h2 class="text-2xl font-bold mb-4">n8n, aÃ§Ä±k kaynaklÄ± bir otomasyon aracÄ±dÄ±r</h2>
                                </div>
                                <div class="grid md:grid-cols-3 gap-4 text-center">
                                    <div class="glass rounded-xl p-4">
                                        <div class="text-3xl mb-2">ğŸ”—</div>
                                        <h3 class="font-bold mb-1">BaÄŸla</h3>
                                        <p class="text-sm text-gray-400">YÃ¼zlerce uygulamayÄ± birbirine baÄŸla</p>
                                    </div>
                                    <div class="glass rounded-xl p-4">
                                        <div class="text-3xl mb-2">âš¡</div>
                                        <h3 class="font-bold mb-1">OtomatikleÅŸtir</h3>
                                        <p class="text-sm text-gray-400">Tekrarlayan iÅŸleri otomatize et</p>
                                    </div>
                                    <div class="glass rounded-xl p-4">
                                        <div class="text-3xl mb-2">ğŸ’ª</div>
                                        <h3 class="font-bold mb-1">GÃ¼Ã§len</h3>
                                        <p class="text-sm text-gray-400">Kod yazmadan gÃ¼Ã§lÃ¼ sistemler kur</p>
                                    </div>
                                </div>
                            `
                        },
                        {
                            type: 'info',
                            title: 'Ne Yapabilirsin?',
                            content: `
                                <h2 class="text-xl font-bold mb-6">n8n ile yapabileceklerin:</h2>
                                <div class="space-y-4">
                                    <div class="flex items-start gap-4 glass rounded-xl p-4">
                                        <div class="text-2xl">ğŸ“§</div>
                                        <div>
                                            <h3 class="font-bold">E-posta Otomasyonu</h3>
                                            <p class="text-gray-400 text-sm">Yeni mÃ¼ÅŸteri geldiÄŸinde otomatik hoÅŸgeldin maili gÃ¶nder</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-4 glass rounded-xl p-4">
                                        <div class="text-2xl">ğŸ“Š</div>
                                        <div>
                                            <h3 class="font-bold">Veri Senkronizasyonu</h3>
                                            <p class="text-gray-400 text-sm">Google Sheets'ten CRM'e otomatik veri aktar</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-4 glass rounded-xl p-4">
                                        <div class="text-2xl">ğŸ””</div>
                                        <div>
                                            <h3 class="font-bold">Bildirim Sistemi</h3>
                                            <p class="text-gray-400 text-sm">Ã–nemli olaylarÄ± Slack veya Telegram'a ilet</p>
                                        </div>
                                    </div>
                                </div>
                            `
                        },
                        {
                            type: 'quiz',
                            title: 'HÄ±zlÄ± Kontrol',
                            question: 'n8n ne iÃ§in kullanÄ±lÄ±r?',
                            options: [
                                { text: 'Video dÃ¼zenleme', correct: false },
                                { text: 'Ä°ÅŸ sÃ¼reÃ§lerini otomatikleÅŸtirme', correct: true },
                                { text: 'Oyun geliÅŸtirme', correct: false },
                                { text: 'FotoÄŸraf filtreleme', correct: false }
                            ],
                            explanation: 'DoÄŸru! n8n, farklÄ± uygulamalarÄ± birbirine baÄŸlayarak iÅŸ sÃ¼reÃ§lerini otomatikleÅŸtirmek iÃ§in kullanÄ±lÄ±r.'
                        }
                    ]
                },
                {
                    id: 'basics-2',
                    title: 'Workflow KavramÄ±',
                    duration: 4,
                    xp: 25,
                    icon: 'ğŸ”„',
                    steps: [
                        {
                            type: 'info',
                            title: 'Workflow Nedir?',
                            content: `
                                <div class="text-center mb-6">
                                    <div class="text-5xl mb-4">ğŸ”„</div>
                                    <h2 class="text-2xl font-bold">Workflow = Ä°ÅŸ AkÄ±ÅŸÄ±</h2>
                                </div>
                                <p class="text-gray-300 text-center mb-8">Bir workflow, baÅŸtan sona otomatik Ã§alÄ±ÅŸan bir sÃ¼reÃ§tir.</p>
                                <div class="flex items-center justify-center gap-4 flex-wrap">
                                    <div class="glass rounded-xl p-4 text-center">
                                        <div class="text-2xl mb-2">âš¡</div>
                                        <div class="text-sm">Tetikleyici</div>
                                    </div>
                                    <i class="fas fa-arrow-right text-n8n-primary"></i>
                                    <div class="glass rounded-xl p-4 text-center">
                                        <div class="text-2xl mb-2">âš™ï¸</div>
                                        <div class="text-sm">Ä°ÅŸlem 1</div>
                                    </div>
                                    <i class="fas fa-arrow-right text-n8n-primary"></i>
                                    <div class="glass rounded-xl p-4 text-center">
                                        <div class="text-2xl mb-2">âš™ï¸</div>
                                        <div class="text-sm">Ä°ÅŸlem 2</div>
                                    </div>
                                    <i class="fas fa-arrow-right text-n8n-primary"></i>
                                    <div class="glass rounded-xl p-4 text-center">
                                        <div class="text-2xl mb-2">âœ…</div>
                                        <div class="text-sm">SonuÃ§</div>
                                    </div>
                                </div>
                            `
                        },
                        {
                            type: 'info',
                            title: 'GerÃ§ek Ã–rnek',
                            content: `
                                <h2 class="text-xl font-bold mb-4">ğŸ“± MÃ¼ÅŸteri Formu Workflow'u</h2>
                                <div class="space-y-3">
                                    <div class="flex items-center gap-3 glass rounded-lg p-3">
                                        <div class="w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center text-purple-400">1</div>
                                        <div class="flex-1">
                                            <div class="font-medium">Form GÃ¶nderildi</div>
                                            <div class="text-xs text-gray-400">MÃ¼ÅŸteri web sitesinden form doldurdu</div>
                                        </div>
                                        <span class="text-xl">ğŸ“</span>
                                    </div>
                                    <div class="flex items-center gap-3 glass rounded-lg p-3">
                                        <div class="w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center text-blue-400">2</div>
                                        <div class="flex-1">
                                            <div class="font-medium">CRM'e Kaydet</div>
                                            <div class="text-xs text-gray-400">MÃ¼ÅŸteri bilgileri otomatik kaydedildi</div>
                                        </div>
                                        <span class="text-xl">ğŸ’¾</span>
                                    </div>
                                    <div class="flex items-center gap-3 glass rounded-lg p-3">
                                        <div class="w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center text-green-400">3</div>
                                        <div class="flex-1">
                                            <div class="font-medium">E-posta GÃ¶nder</div>
                                            <div class="text-xs text-gray-400">HoÅŸgeldin maili otomatik gÃ¶nderildi</div>
                                        </div>
                                        <span class="text-xl">ğŸ“§</span>
                                    </div>
                                    <div class="flex items-center gap-3 glass rounded-lg p-3">
                                        <div class="w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center text-orange-400">4</div>
                                        <div class="flex-1">
                                            <div class="font-medium">Slack Bildirimi</div>
                                            <div class="text-xs text-gray-400">SatÄ±ÅŸ ekibi bilgilendirildi</div>
                                        </div>
                                        <span class="text-xl">ğŸ””</span>
                                    </div>
                                </div>
                                <p class="text-center text-gray-400 mt-4 text-sm">TÃ¼m bunlar saniyeler iÃ§inde, otomatik olarak gerÃ§ekleÅŸir! âš¡</p>
                            `
                        },
                        {
                            type: 'quiz',
                            title: 'AnladÄ±n mÄ±?',
                            question: 'Bir workflow\'un ilk adÄ±mÄ± genellikle nedir?',
                            options: [
                                { text: 'E-posta gÃ¶ndermek', correct: false },
                                { text: 'Tetikleyici (Trigger)', correct: true },
                                { text: 'Veri kaydetmek', correct: false },
                                { text: 'Rapor oluÅŸturmak', correct: false }
                            ],
                            explanation: 'Harika! Her workflow bir tetikleyici ile baÅŸlar. Bu, workflow\'un ne zaman Ã§alÄ±ÅŸacaÄŸÄ±nÄ± belirler.'
                        }
                    ]
                },
                {
                    id: 'basics-3',
                    title: 'Node\'lar: YapÄ± TaÅŸlarÄ±',
                    duration: 4,
                    xp: 25,
                    icon: 'ğŸ“¦',
                    steps: [
                        {
                            type: 'info',
                            title: 'Node Nedir?',
                            content: `
                                <div class="text-center mb-6">
                                    <div class="text-5xl mb-4">ğŸ“¦</div>
                                    <h2 class="text-2xl font-bold">Node = Lego ParÃ§asÄ±</h2>
                                </div>
                                <p class="text-gray-300 text-center mb-6">Her node, tek bir iÅŸlem yapar. Node'larÄ± birleÅŸtirerek karmaÅŸÄ±k workflow'lar oluÅŸturursun.</p>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="glass rounded-xl p-4 border-l-4 border-purple-500">
                                        <h3 class="font-bold text-purple-400 mb-2">âš¡ Trigger Node</h3>
                                        <p class="text-sm text-gray-400">Workflow'u baÅŸlatÄ±r. Ã–rn: Webhook, Schedule, Form</p>
                                    </div>
                                    <div class="glass rounded-xl p-4 border-l-4 border-blue-500">
                                        <h3 class="font-bold text-blue-400 mb-2">âš™ï¸ Action Node</h3>
                                        <p class="text-sm text-gray-400">Bir iÅŸlem yapar. Ã–rn: HTTP Request, Send Email</p>
                                    </div>
                                    <div class="glass rounded-xl p-4 border-l-4 border-green-500">
                                        <h3 class="font-bold text-green-400 mb-2">ğŸ”€ Logic Node</h3>
                                        <p class="text-sm text-gray-400">AkÄ±ÅŸÄ± yÃ¶nlendirir. Ã–rn: IF, Switch, Merge</p>
                                    </div>
                                    <div class="glass rounded-xl p-4 border-l-4 border-orange-500">
                                        <h3 class="font-bold text-orange-400 mb-2">ğŸ”„ Transform Node</h3>
                                        <p class="text-sm text-gray-400">Veriyi deÄŸiÅŸtirir. Ã–rn: Set, Function, Split</p>
                                    </div>
                                </div>
                            `
                        },
                        {
                            type: 'interactive',
                            title: 'Node Anatomisi',
                            content: `
                                <h2 class="text-xl font-bold mb-6 text-center">Bir Node'un YapÄ±sÄ±</h2>
                                <div class="flex justify-center mb-6">
                                    <div class="relative">
                                        <div class="w-64 h-40 glass rounded-2xl border-2 border-n8n-primary flex flex-col items-center justify-center">
                                            <div class="text-3xl mb-2">ğŸ“§</div>
                                            <div class="font-bold">Send Email</div>
                                            <div class="text-xs text-gray-400">Gmail</div>
                                        </div>
                                        <!-- Input -->
                                        <div class="absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2">
                                            <div class="w-4 h-4 bg-n8n-primary rounded-full"></div>
                                            <div class="absolute left-6 top-1/2 -translate-y-1/2 text-xs text-n8n-primary whitespace-nowrap">GiriÅŸ</div>
                                        </div>
                                        <!-- Output -->
                                        <div class="absolute right-0 top-1/2 translate-x-1/2 -translate-y-1/2">
                                            <div class="w-4 h-4 bg-n8n-accent rounded-full"></div>
                                            <div class="absolute right-6 top-1/2 -translate-y-1/2 text-xs text-n8n-accent whitespace-nowrap">Ã‡Ä±kÄ±ÅŸ</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid md:grid-cols-3 gap-4 text-center text-sm">
                                    <div class="glass rounded-lg p-3">
                                        <div class="text-n8n-primary font-bold">â¬…ï¸ GiriÅŸ</div>
                                        <p class="text-gray-400">Ã–nceki node'dan veri alÄ±r</p>
                                    </div>
                                    <div class="glass rounded-lg p-3">
                                        <div class="text-yellow-400 font-bold">âš™ï¸ Ä°ÅŸlem</div>
                                        <p class="text-gray-400">Veriyi iÅŸler/dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r</p>
                                    </div>
                                    <div class="glass rounded-lg p-3">
                                        <div class="text-n8n-accent font-bold">â¡ï¸ Ã‡Ä±kÄ±ÅŸ</div>
                                        <p class="text-gray-400">Sonraki node'a veri gÃ¶nderir</p>
                                    </div>
                                </div>
                            `
                        },
                        {
                            type: 'quiz',
                            title: 'Test ZamanÄ±!',
                            question: 'Hangi node tÃ¼rÃ¼ workflow\'u baÅŸlatÄ±r?',
                            options: [
                                { text: 'Action Node', correct: false },
                                { text: 'Transform Node', correct: false },
                                { text: 'Trigger Node', correct: true },
                                { text: 'Logic Node', correct: false }
                            ],
                            explanation: 'MÃ¼kemmel! Trigger node\'lar workflow\'un baÅŸlangÄ±Ã§ noktasÄ±dÄ±r. Bir olay gerÃ§ekleÅŸtiÄŸinde workflow\'u tetiklerler.'
                        }
                    ]
                },
                {
                    id: 'basics-4',
                    title: 'Veri AkÄ±ÅŸÄ±',
                    duration: 3,
                    xp: 20,
                    icon: 'ğŸŒŠ',
                    steps: [
                        {
                            type: 'info',
                            title: 'Veri NasÄ±l Akar?',
                            content: `
                                <div class="text-center mb-6">
                                    <div class="text-5xl mb-4">ğŸŒŠ</div>
                                    <h2 class="text-2xl font-bold">Veri, Su Gibi Akar</h2>
                                </div>
                                <p class="text-gray-300 text-center mb-6">n8n'de veri, node'dan node'a JSON formatÄ±nda akar.</p>
                                <div class="code-block p-4 mb-4">
                                    <pre class="text-sm text-green-400">{
  "name": "Ahmet",
  "email": "ahmet@email.com",
  "company": "ABC Ltd"
}</pre>
                                </div>
                                <p class="text-center text-gray-400 text-sm">Her node bu veriyi alÄ±r, iÅŸler ve bir sonrakine iletir.</p>
                            `
                        },
                        {
                            type: 'quiz',
                            title: 'Son Kontrol',
                            question: 'n8n\'de veri hangi formatta taÅŸÄ±nÄ±r?',
                            options: [
                                { text: 'XML', correct: false },
                                { text: 'JSON', correct: true },
                                { text: 'CSV', correct: false },
                                { text: 'Plain Text', correct: false }
                            ],
                            explanation: 'DoÄŸru! n8n\'de tÃ¼m veriler JSON formatÄ±nda node\'lar arasÄ±nda taÅŸÄ±nÄ±r.'
                        }
                    ]
                },
                {
                    id: 'basics-5',
                    title: 'Ä°lk Workflow',
                    duration: 5,
                    xp: 35,
                    icon: 'ğŸ¯',
                    steps: [
                        {
                            type: 'info',
                            title: 'HazÄ±r mÄ±sÄ±n?',
                            content: `
                                <div class="text-center">
                                    <div class="text-6xl mb-4">ğŸ¯</div>
                                    <h2 class="text-2xl font-bold mb-4">Ä°lk Workflow'unu OluÅŸturalÄ±m!</h2>
                                    <p class="text-gray-400 mb-6">Ã–ÄŸrendiklerini pratiÄŸe dÃ¶kme zamanÄ±.</p>
                                    <div class="glass rounded-xl p-6 text-left max-w-md mx-auto">
                                        <h3 class="font-bold mb-3">Hedef:</h3>
                                        <p class="text-gray-300 mb-4">Bir webhook tetikleyicisi ile baÅŸlayan ve gelen veriyi loglayan basit bir workflow.</p>
                                        <div class="space-y-2 text-sm">
                                            <div class="flex items-center gap-2">
                                                <i class="fas fa-check text-n8n-accent"></i>
                                                <span>Webhook Trigger ekle</span>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <i class="fas fa-check text-n8n-accent"></i>
                                                <span>Set Node ile veri oluÅŸtur</span>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <i class="fas fa-check text-n8n-accent"></i>
                                                <span>Workflow'u Ã§alÄ±ÅŸtÄ±r</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `
                        },
                        {
                            type: 'practice',
                            title: 'Sandbox\'a Git',
                            content: `
                                <div class="text-center">
                                    <div class="text-5xl mb-4">ğŸ§ª</div>
                                    <h2 class="text-xl font-bold mb-4">Åimdi Sandbox'ta Dene!</h2>
                                    <p class="text-gray-400 mb-6">AÅŸaÄŸÄ±daki butona tÄ±klayarak sandbox'a git ve workflow'unu oluÅŸtur.</p>
                                    <button onclick="goToSandboxWithChallenge('hello')" class="px-6 py-3 bg-n8n-primary rounded-xl font-bold hover:bg-n8n-primary/80 transition">
                                        <i class="fas fa-flask mr-2"></i> Sandbox'a Git
                                    </button>
                                </div>
                            `
                        }
                    ]
                }
            ],
            triggers: [
                {
                    id: 'triggers-1',
                    title: 'Webhook Trigger',
                    duration: 4,
                    xp: 30,
                    icon: 'ğŸ”—',
                    locked: true,
                    steps: []
                },
                {
                    id: 'triggers-2',
                    title: 'Schedule Trigger',
                    duration: 3,
                    xp: 25,
                    icon: 'â°',
                    locked: true,
                    steps: []
                }
            ],
            actions: [
                {
                    id: 'actions-1',
                    title: 'HTTP Request',
                    duration: 5,
                    xp: 35,
                    icon: 'ğŸŒ',
                    locked: true,
                    steps: []
                }
            ],
            data: [
                {
                    id: 'data-1',
                    title: 'Set Node',
                    duration: 3,
                    xp: 25,
                    icon: 'âœï¸',
                    locked: true,
                    steps: []
                }
            ]
        };

        // ==========================================
        // BADGES DATA
        // ==========================================
        const badgesData = [
            { id: 'first-lesson', name: 'Ä°lk AdÄ±m', icon: 'ğŸ¯', description: 'Ä°lk dersini tamamla', unlocked: false },
            { id: 'basics-complete', name: 'Temel Bilgi', icon: 'ğŸ“¦', description: 'Temel kavramlarÄ± bitir', unlocked: false },
            { id: 'first-workflow', name: 'Workflow Master', icon: 'ğŸ”„', description: 'Ä°lk workflow\'unu oluÅŸtur', unlocked: false },
            { id: 'streak-3', name: '3 GÃ¼n Seri', icon: 'ğŸ”¥', description: '3 gÃ¼n Ã¼st Ã¼ste Ã§alÄ±ÅŸ', unlocked: false },
            { id: 'streak-7', name: 'HaftalÄ±k Seri', icon: 'ğŸ’ª', description: '7 gÃ¼n Ã¼st Ã¼ste Ã§alÄ±ÅŸ', unlocked: false },
            { id: 'xp-100', name: 'XP Hunter', icon: 'â­', description: '100 XP kazan', unlocked: false },
            { id: 'xp-500', name: 'XP Master', icon: 'ğŸŒŸ', description: '500 XP kazan', unlocked: false },
            { id: 'quiz-master', name: 'Quiz KralÄ±', icon: 'ğŸ§ ', description: '10 quiz\'i doÄŸru cevapla', unlocked: false },
            { id: 'sandbox-pro', name: 'Sandbox Pro', icon: 'ğŸ§ª', description: '5 sandbox gÃ¶revi tamamla', unlocked: false },
            { id: 'speed-learner', name: 'HÄ±zlÄ± Ã–ÄŸrenci', icon: 'âš¡', description: '1 gÃ¼nde 5 ders bitir', unlocked: false },
            { id: 'night-owl', name: 'Gece KuÅŸu', icon: 'ğŸ¦‰', description: 'Gece 12\'den sonra Ã§alÄ±ÅŸ', unlocked: false },
            { id: 'early-bird', name: 'Erken KuÅŸ', icon: 'ğŸ¦', description: 'Sabah 6\'da Ã§alÄ±ÅŸ', unlocked: false }
        ];

        // ==========================================
        // INITIALIZATION
        // ==========================================
        function init() {
            loadState();
            renderLessons();
            renderBadges();
            renderMilestones();
            updateUI();
            checkStreak();

            // Show welcome toast for first time users
            if (state.progress.completedLessons.length === 0) {
                setTimeout(() => {
                    showToast('ğŸ‰ n8n Academy\'ye hoÅŸ geldin!', 'success');
                }, 1000);
            }
        }

        // ==========================================
        // STATE PERSISTENCE
        // ==========================================
        function loadState() {
            const saved = localStorage.getItem('n8n-academy-state');
            if (saved) {
                state = JSON.parse(saved);
            }
        }

        function saveState() {
            localStorage.setItem('n8n-academy-state', JSON.stringify(state));
        }

        // ==========================================
        // NAVIGATION
        // ==========================================
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');

            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-white');
                btn.classList.add('text-gray-400');
                if (btn.dataset.section === sectionId) {
                    btn.classList.remove('text-gray-400');
                    btn.classList.add('text-white');
                }
            });
        }

        // ==========================================
        // LESSONS RENDERING
        // ==========================================
        function renderLessons(filter = 'all') {
            const grid = document.getElementById('lessonsGrid');
            grid.innerHTML = '';

            Object.entries(lessonsData).forEach(([module, lessons]) => {
                if (filter !== 'all' && filter !== module) return;

                lessons.forEach((lesson, index) => {
                    const isCompleted = state.progress.completedLessons.includes(lesson.id);
                    const isLocked = lesson.locked && !canAccessLesson(lesson.id);

                    const card = document.createElement('div');
                    card.className = `lesson-card glass rounded-2xl p-5 cursor-pointer border-2 transition ${
                        isCompleted ? 'border-n8n-accent/50' : isLocked ? 'border-gray-700 opacity-60' : 'border-transparent hover:border-n8n-primary/50'
                    }`;
                    card.onclick = () => !isLocked && openLesson(lesson);

                    card.innerHTML = `
                        <div class="flex items-start justify-between mb-3">
                            <span class="text-3xl">${lesson.icon}</span>
                            ${isCompleted ? '<i class="fas fa-check-circle text-n8n-accent text-xl"></i>' :
                              isLocked ? '<i class="fas fa-lock text-gray-500"></i>' : ''}
                        </div>
                        <h3 class="font-bold mb-1">${lesson.title}</h3>
                        <div class="flex items-center gap-3 text-sm text-gray-400">
                            <span><i class="fas fa-clock mr-1"></i>${lesson.duration} dk</span>
                            <span><i class="fas fa-star mr-1 text-yellow-400"></i>${lesson.xp} XP</span>
                        </div>
                        ${isLocked ? '<div class="mt-2 text-xs text-gray-500">Ã–nceki dersleri tamamla</div>' : ''}
                    `;

                    grid.appendChild(card);
                });
            });
        }

        function filterLessons(filter) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-n8n-primary');
                btn.classList.add('bg-n8n-secondary');
                if (btn.dataset.filter === filter) {
                    btn.classList.remove('bg-n8n-secondary');
                    btn.classList.add('bg-n8n-primary');
                }
            });
            renderLessons(filter);
        }

        function canAccessLesson(lessonId) {
            // For now, basics are always accessible
            if (lessonId.startsWith('basics')) return true;

            // Check if all basics are completed for other modules
            const basicsComplete = lessonsData.basics.every(l =>
                state.progress.completedLessons.includes(l.id)
            );
            return basicsComplete;
        }

        // ==========================================
        // LESSON MODAL
        // ==========================================
        let currentLesson = null;
        let currentStepIndex = 0;

        function openLesson(lesson) {
            currentLesson = lesson;
            currentStepIndex = 0;

            document.getElementById('lessonModal').classList.remove('hidden');
            document.getElementById('lessonModalTitle').textContent = lesson.title;
            document.getElementById('lessonModalModule').textContent = getModuleName(lesson.id);
            document.getElementById('lessonModalDuration').textContent = `${lesson.duration} dk`;
            document.getElementById('lessonTotal').textContent = lesson.steps.length;

            renderLessonStep();
            updateLessonDots();
        }

        function closeLessonModal() {
            document.getElementById('lessonModal').classList.add('hidden');
            currentLesson = null;
        }

        function renderLessonStep() {
            if (!currentLesson || !currentLesson.steps[currentStepIndex]) return;

            const step = currentLesson.steps[currentStepIndex];
            const content = document.getElementById('lessonModalContent');
            document.getElementById('lessonProgress').textContent = currentStepIndex + 1;

            if (step.type === 'info' || step.type === 'interactive' || step.type === 'practice') {
                content.innerHTML = `
                    <div class="slide-in">
                        <h2 class="text-2xl font-bold mb-6">${step.title}</h2>
                        ${step.content}
                    </div>
                `;
            } else if (step.type === 'quiz') {
                content.innerHTML = `
                    <div class="slide-in">
                        <h2 class="text-2xl font-bold mb-6">${step.title}</h2>
                        <div class="glass rounded-xl p-6 max-w-2xl mx-auto">
                            <p class="text-lg mb-6">${step.question}</p>
                            <div class="space-y-3" id="quizOptions">
                                ${step.options.map((opt, i) => `
                                    <button onclick="checkAnswer(${i}, ${opt.correct})"
                                            class="quiz-option w-full text-left p-4 glass rounded-xl hover:bg-white/10 transition flex items-center gap-3">
                                        <span class="w-8 h-8 bg-n8n-secondary rounded-lg flex items-center justify-center font-bold">
                                            ${String.fromCharCode(65 + i)}
                                        </span>
                                        <span>${opt.text}</span>
                                    </button>
                                `).join('')}
                            </div>
                            <div id="quizFeedback" class="hidden mt-4 p-4 rounded-xl"></div>
                        </div>
                    </div>
                `;
            }

            // Update navigation buttons
            document.getElementById('prevStepBtn').disabled = currentStepIndex === 0;
            const nextBtn = document.getElementById('nextStepBtn');

            if (currentStepIndex === currentLesson.steps.length - 1) {
                nextBtn.innerHTML = 'Tamamla <i class="fas fa-check ml-2"></i>';
                nextBtn.onclick = completeLesson;
            } else {
                nextBtn.innerHTML = 'Sonraki <i class="fas fa-chevron-right ml-2"></i>';
                nextBtn.onclick = nextLessonStep;
            }
        }

        function updateLessonDots() {
            const dots = document.getElementById('lessonDots');
            dots.innerHTML = currentLesson.steps.map((_, i) => `
                <div class="w-2 h-2 rounded-full ${i === currentStepIndex ? 'bg-n8n-primary' : 'bg-gray-600'}"></div>
            `).join('');
        }

        function prevLessonStep() {
            if (currentStepIndex > 0) {
                currentStepIndex--;
                renderLessonStep();
                updateLessonDots();
            }
        }

        function nextLessonStep() {
            if (currentStepIndex < currentLesson.steps.length - 1) {
                currentStepIndex++;
                renderLessonStep();
                updateLessonDots();
            }
        }

        function checkAnswer(index, correct) {
            const options = document.querySelectorAll('.quiz-option');
            const feedback = document.getElementById('quizFeedback');
            const step = currentLesson.steps[currentStepIndex];

            options.forEach((opt, i) => {
                opt.disabled = true;
                opt.classList.add('pointer-events-none');
                if (i === index) {
                    if (correct) {
                        opt.classList.add('bg-green-500/20', 'border', 'border-green-500');
                    } else {
                        opt.classList.add('bg-red-500/20', 'border', 'border-red-500');
                    }
                }
            });

            feedback.classList.remove('hidden');
            if (correct) {
                feedback.className = 'mt-4 p-4 rounded-xl bg-green-500/20 border border-green-500';
                feedback.innerHTML = `<i class="fas fa-check-circle text-green-400 mr-2"></i> ${step.explanation}`;
                addXP(10);
            } else {
                feedback.className = 'mt-4 p-4 rounded-xl bg-red-500/20 border border-red-500';
                feedback.innerHTML = `<i class="fas fa-times-circle text-red-400 mr-2"></i> YanlÄ±ÅŸ. ${step.explanation}`;
            }
        }

        function completeLesson() {
            if (!currentLesson) return;

            if (!state.progress.completedLessons.includes(currentLesson.id)) {
                state.progress.completedLessons.push(currentLesson.id);
                addXP(currentLesson.xp);

                // Check for badges
                if (state.progress.completedLessons.length === 1) {
                    unlockBadge('first-lesson');
                }

                const basicsComplete = lessonsData.basics.every(l =>
                    state.progress.completedLessons.includes(l.id)
                );
                if (basicsComplete) {
                    unlockBadge('basics-complete');
                }

                showConfetti();
                showToast(`ğŸ‰ "${currentLesson.title}" tamamlandÄ±! +${currentLesson.xp} XP`, 'success');
            }

            saveState();
            updateUI();
            closeLessonModal();
            renderLessons();
        }

        function getModuleName(lessonId) {
            const module = lessonId.split('-')[0];
            const names = {
                basics: 'Temel Kavramlar',
                triggers: 'Trigger\'lar',
                actions: 'Action Node\'lar',
                data: 'Veri DÃ¶nÃ¼ÅŸÃ¼mÃ¼'
            };
            return names[module] || module;
        }

        // ==========================================
        // XP & LEVELING
        // ==========================================
        function addXP(amount) {
            state.user.xp += amount;

            // Check level up
            const newLevel = Math.floor(state.user.xp / 100) + 1;
            if (newLevel > state.user.level) {
                state.user.level = newLevel;
                showToast(`ğŸŠ Seviye atladÄ±n! Yeni seviye: ${newLevel}`, 'success');
                showConfetti();
            }

            // Check XP badges
            if (state.user.xp >= 100) unlockBadge('xp-100');
            if (state.user.xp >= 500) unlockBadge('xp-500');

            saveState();
            updateUI();
        }

        // ==========================================
        // BADGES
        // ==========================================
        function renderBadges() {
            const grid = document.getElementById('badgesGrid');
            grid.innerHTML = badgesData.map(badge => {
                const unlocked = state.achievements.badges.includes(badge.id);
                return `
                    <div class="glass rounded-xl p-4 text-center ${unlocked ? '' : 'opacity-40'}">
                        <div class="text-4xl mb-2 ${unlocked ? '' : 'grayscale'}">${badge.icon}</div>
                        <div class="font-bold text-sm">${badge.name}</div>
                        <div class="text-xs text-gray-400 mt-1">${badge.description}</div>
                    </div>
                `;
            }).join('');
        }

        function unlockBadge(badgeId) {
            if (!state.achievements.badges.includes(badgeId)) {
                state.achievements.badges.push(badgeId);
                const badge = badgesData.find(b => b.id === badgeId);
                if (badge) {
                    showToast(`ğŸ† Yeni rozet: ${badge.name}!`, 'success');
                    showConfetti();
                }
                saveState();
                renderBadges();
                updateUI();
            }
        }

        // ==========================================
        // MILESTONES
        // ==========================================
        function renderMilestones() {
            const list = document.getElementById('milestonesList');
            const milestones = [
                { title: 'Temel KavramlarÄ± Ã–ÄŸren', target: 5, current: state.progress.completedLessons.filter(l => l.startsWith('basics')).length, icon: 'ğŸ“¦' },
                { title: '100 XP Kazan', target: 100, current: state.user.xp, icon: 'â­' },
                { title: '7 GÃ¼nlÃ¼k Seri Yap', target: 7, current: state.user.streak, icon: 'ğŸ”¥' },
                { title: 'TÃ¼m Rozetleri Kazan', target: badgesData.length, current: state.achievements.badges.length, icon: 'ğŸ†' }
            ];

            list.innerHTML = milestones.map(m => {
                const progress = Math.min((m.current / m.target) * 100, 100);
                const completed = m.current >= m.target;
                return `
                    <div class="glass rounded-xl p-4 ${completed ? 'border border-n8n-accent/50' : ''}">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center gap-3">
                                <span class="text-2xl">${m.icon}</span>
                                <span class="font-bold">${m.title}</span>
                            </div>
                            <span class="text-sm ${completed ? 'text-n8n-accent' : 'text-gray-400'}">
                                ${m.current}/${m.target}
                            </span>
                        </div>
                        <div class="h-2 bg-n8n-secondary rounded-full overflow-hidden">
                            <div class="h-full ${completed ? 'bg-n8n-accent' : 'bg-n8n-primary'} transition-all duration-500"
                                 style="width: ${progress}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ==========================================
        // STREAK
        // ==========================================
        function checkStreak() {
            const today = new Date().toDateString();
            const lastActivity = state.user.lastActivity;

            if (lastActivity) {
                const lastDate = new Date(lastActivity);
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);

                if (lastDate.toDateString() === yesterday.toDateString()) {
                    // Continue streak
                } else if (lastDate.toDateString() !== today) {
                    // Break streak
                    state.user.streak = 0;
                }
            }

            if (state.user.lastActivity !== today) {
                state.user.lastActivity = today;
                state.user.streak++;

                if (state.user.streak >= 3) unlockBadge('streak-3');
                if (state.user.streak >= 7) unlockBadge('streak-7');

                saveState();
            }

            updateUI();
        }

        // ==========================================
        // UI UPDATES
        // ==========================================
        function updateUI() {
            // Header stats
            document.getElementById('xpCount').textContent = state.user.xp;
            document.getElementById('streakCount').textContent = state.user.streak;
            document.getElementById('levelNumber').textContent = state.user.level;

            // Level progress ring
            const progressInLevel = (state.user.xp % 100) / 100;
            const circumference = 125.6;
            document.getElementById('levelProgress').style.strokeDashoffset =
                circumference - (progressInLevel * circumference);

            // Dashboard stats
            document.getElementById('completedLessons').textContent = state.progress.completedLessons.length;
            document.getElementById('totalTime').textContent = state.progress.completedLessons.length * 4; // Approx
            document.getElementById('badgesEarned').textContent = state.achievements.badges.length;
            document.getElementById('currentStreak').textContent = state.user.streak;
            document.getElementById('unlockedBadges').textContent = state.achievements.badges.length;

            // Achievement page
            document.getElementById('totalXP').textContent = state.user.xp;
            document.getElementById('achievementLevel').textContent = state.user.level;
            document.getElementById('totalBadges').textContent = state.achievements.badges.length;
            document.getElementById('achievementStreak').textContent = state.user.streak;
        }

        // ==========================================
        // SANDBOX
        // ==========================================
        let nodeCounter = 1;
        let nodes = [];

        function addNode(type) {
            const container = document.getElementById('nodesContainer');
            const nodeId = `node-${nodeCounter++}`;

            const colors = {
                trigger: { bg: 'from-purple-500 to-purple-700', shadow: 'purple-500' },
                action: { bg: 'from-orange-500 to-orange-700', shadow: 'orange-500' },
                condition: { bg: 'from-cyan-500 to-cyan-700', shadow: 'cyan-500' }
            };

            const icons = {
                trigger: 'fa-bolt',
                action: 'fa-cog',
                condition: 'fa-code-branch'
            };

            const names = {
                trigger: 'Trigger',
                action: 'Action',
                condition: 'IF'
            };

            const node = document.createElement('div');
            node.className = 'absolute sandbox-node';
            node.style.left = `${150 + nodes.length * 180}px`;
            node.style.top = '200px';
            node.dataset.nodeId = nodeId;
            node.innerHTML = `
                <div class="w-32 h-20 bg-gradient-to-br ${colors[type].bg} rounded-xl flex flex-col items-center justify-center cursor-move shadow-lg shadow-${colors[type].shadow}/30">
                    <i class="fas ${icons[type]} text-white text-xl mb-1"></i>
                    <span class="text-white text-xs font-medium">${names[type]}</span>
                </div>
                <div class="absolute left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full border-2 border-n8n-primary cursor-pointer node-input"></div>
                <div class="absolute right-0 top-1/2 translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full border-2 border-n8n-accent cursor-pointer node-output"></div>
            `;

            container.appendChild(node);
            nodes.push({ id: nodeId, type });

            makeDraggable(node);
        }

        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            element.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                if (e.target.classList.contains('node-input') || e.target.classList.contains('node-output')) return;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        function runWorkflow() {
            const output = document.getElementById('outputPanel');
            const status = document.getElementById('executionStatus');

            status.textContent = 'Ã‡alÄ±ÅŸÄ±yor...';
            status.className = 'text-xs text-yellow-400';

            output.innerHTML = '<pre class="text-yellow-400 text-sm">â³ Workflow Ã§alÄ±ÅŸtÄ±rÄ±lÄ±yor...</pre>';

            setTimeout(() => {
                const result = {
                    success: true,
                    executionTime: '0.45s',
                    nodesExecuted: nodes.length + 1,
                    output: {
                        message: "Hello from n8n!",
                        timestamp: new Date().toISOString()
                    }
                };

                output.innerHTML = `<pre class="text-green-400 text-sm">${JSON.stringify(result, null, 2)}</pre>`;
                status.textContent = 'BaÅŸarÄ±lÄ± âœ“';
                status.className = 'text-xs text-green-400';

                addXP(5);
                showToast('âœ… Workflow baÅŸarÄ±yla Ã§alÄ±ÅŸtÄ±! +5 XP', 'success');
            }, 1500);
        }

        function clearWorkflow() {
            const container = document.getElementById('nodesContainer');
            container.querySelectorAll('.sandbox-node:not([data-node-id="start"])').forEach(n => n.remove());
            nodes = [];
            nodeCounter = 1;
            document.getElementById('outputPanel').innerHTML = '<pre class="text-gray-400 text-sm">// Workflow Ã§Ä±ktÄ±sÄ± burada gÃ¶rÃ¼necek</pre>';
            document.getElementById('executionStatus').textContent = 'Bekleniyor...';
        }

        function loadChallenge(challengeId) {
            clearWorkflow();
            showToast(`ğŸ® "${challengeId}" gÃ¶revi yÃ¼klendi!`, 'info');
        }

        function goToSandboxWithChallenge(challenge) {
            closeLessonModal();
            showSection('sandbox');
            loadChallenge(challenge);
        }

        // ==========================================
        // ROADMAP
        // ==========================================
        function openModule(moduleId) {
            const moduleNodes = document.querySelectorAll('.node');
            const clickedNode = Array.from(moduleNodes).find(n =>
                n.onclick.toString().includes(`'${moduleId}'`)
            );

            if (clickedNode && clickedNode.classList.contains('locked')) {
                showToast('ğŸ”’ Ã–nce Ã¶nceki modÃ¼lleri tamamla!', 'warning');
                clickedNode.classList.add('shake');
                setTimeout(() => clickedNode.classList.remove('shake'), 500);
                return;
            }

            if (moduleId === 'start') {
                showSection('lessons');
                filterLessons('basics');
            } else if (moduleId === 'basics') {
                showSection('lessons');
                filterLessons('basics');
            } else {
                showToast('ğŸ”œ Bu modÃ¼l yakÄ±nda aÃ§Ä±lacak!', 'info');
            }
        }

        // ==========================================
        // FOCUS MODE & TIMER
        // ==========================================
        let timerInterval = null;
        let timerSeconds = 25 * 60;

        function toggleFocusMode() {
            state.settings.focusMode = !state.settings.focusMode;
            document.getElementById('focusTimer').classList.toggle('hidden', !state.settings.focusMode);

            if (state.settings.focusMode) {
                showToast('ğŸ§  Odak modu aktif! 25 dakika kesintisiz Ã§alÄ±ÅŸ.', 'info');
            }
        }

        function startTimer() {
            if (timerInterval) return;
            timerInterval = setInterval(() => {
                timerSeconds--;
                updateTimerDisplay();
                if (timerSeconds <= 0) {
                    pauseTimer();
                    showToast('â° Mola zamanÄ±! 5 dakika dinlen.', 'success');
                    showConfetti();
                    timerSeconds = 5 * 60; // 5 min break
                    updateTimerDisplay();
                }
            }, 1000);
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
        }

        function resetTimer() {
            pauseTimer();
            timerSeconds = 25 * 60;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const mins = Math.floor(timerSeconds / 60);
            const secs = timerSeconds % 60;
            document.getElementById('timerDisplay').textContent =
                `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // ==========================================
        // UTILITIES
        // ==========================================
        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');

            const colors = {
                success: 'bg-green-500/20 border-green-500',
                error: 'bg-red-500/20 border-red-500',
                warning: 'bg-yellow-500/20 border-yellow-500',
                info: 'bg-blue-500/20 border-blue-500'
            };

            toast.className = `px-4 py-3 rounded-xl border ${colors[type]} slide-in`;
            toast.innerHTML = message;

            container.appendChild(toast);

            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100px)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function showConfetti() {
            const canvas = document.getElementById('confettiCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            const colors = ['#ff6d5a', '#8b5cf6', '#00d4aa', '#f97316', '#3b82f6'];

            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: canvas.height + 10,
                    vx: (Math.random() - 0.5) * 10,
                    vy: -Math.random() * 15 - 10,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 8 + 4,
                    rotation: Math.random() * 360
                });
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                let active = false;
                particles.forEach(p => {
                    if (p.y < canvas.height + 50) {
                        active = true;
                        p.x += p.vx;
                        p.y += p.vy;
                        p.vy += 0.3;
                        p.rotation += 5;

                        ctx.save();
                        ctx.translate(p.x, p.y);
                        ctx.rotate(p.rotation * Math.PI / 180);
                        ctx.fillStyle = p.color;
                        ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
                        ctx.restore();
                    }
                });

                if (active) {
                    requestAnimationFrame(animate);
                } else {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            }

            animate();
        }

        function continueLesson() {
            // Find the first incomplete lesson
            for (const [module, lessons] of Object.entries(lessonsData)) {
                for (const lesson of lessons) {
                    if (!state.progress.completedLessons.includes(lesson.id) && !lesson.locked) {
                        openLesson(lesson);
                        return;
                    }
                }
            }
            showToast('ğŸ‰ TÃ¼m dersleri tamamladÄ±n!', 'success');
        }

        function startDailyChallenge() {
            showSection('sandbox');
            loadChallenge('daily');
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);

        // Make start node draggable
        setTimeout(() => {
            const startNode = document.querySelector('[data-node-id="start"]');
            if (startNode) makeDraggable(startNode);
        }, 100);
    </script>
</body>
</html>
